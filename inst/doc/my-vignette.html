<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Using DevTreatRules</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Using DevTreatRules</h1>



<p>Here, we illustrate the <code>DevTreatRules</code> package by building and evaluating treatment rules based on the example dataset included with the package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(DevTreatRules)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">head</span>(obsStudyGeneExpressions)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">##   no_relapse intervention prognosis clinic age gene_1 gene_2 gene_3 gene_4</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">## 1          1            0      Good      1  46  0.531  0.071 0.1294  0.427</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">## 2          0            1      Poor      3  51  0.744  0.711 1.3532  1.939</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">## 3          1            0      Poor      3  62  1.146  0.498 1.4707  1.456</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">## 4          1            0      Good      5  51  1.816  1.758 0.2226  0.688</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">## 5          1            1      Good      4  52  0.403  0.636 0.0933  0.288</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">## 6          1            1      Poor      6  51  1.797  0.642 0.2618  0.277</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">##   gene_5 gene_6 gene_7 gene_8 gene_9 gene_10</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">## 1  0.421  0.402  0.831 0.0136  1.186  1.8831</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">## 2  0.230  0.228  0.282 1.3413  1.106  0.6606</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">## 3  0.291  0.543  0.915 0.4839  1.193  0.6233</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">## 4  0.620  1.571  1.606 1.9986  0.785  1.7684</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">## 5  0.300  1.276  0.642 1.9003  0.521  0.0126</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">## 6  1.053  0.939  1.736 0.2348  1.480  1.3908</span></a></code></pre></div>
<div id="split-the-dataset" class="section level2">
<h2>Split the Dataset</h2>
<p>First, we split <code>obsStudyGeneExpressions</code> into independent development/validation/evaluation partitions by calling the <code>SplitData()</code> function</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">example.split &lt;-<span class="st"> </span><span class="kw">SplitData</span>(<span class="dt">data=</span>obsStudyGeneExpressions, <span class="dt">n.sets=</span><span class="dv">3</span>, <span class="dt">split.proportions=</span><span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.25</span>, <span class="fl">0.25</span>))</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">table</span>(example.split<span class="op">$</span>partition)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">## development  validation  evaluation </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">##        2500        1250        1250</span></a></code></pre></div>
<p>and then forming independent datasets based on the <code>partition</code> variable created above.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">development.data &lt;-<span class="st"> </span>example.split <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(partition <span class="op">==</span><span class="st"> &quot;development&quot;</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">validation.data &lt;-<span class="st">  </span>example.split <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(partition <span class="op">==</span><span class="st"> &quot;validation&quot;</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">evaluation.data &lt;-<span class="st">  </span>example.split <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(partition <span class="op">==</span><span class="st"> &quot;evaluation&quot;</span>)</a></code></pre></div>
</div>
<div id="specify-variable-roles" class="section level2">
<h2>Specify Variable Roles</h2>
<p>Suppose we believe the variables <code>prognosis</code>, <code>clinic</code>, and <code>age</code> may have influenced treatment assignment. We would codify this knowledge into <code>DevTreatRules</code> by specifying the argument</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">names.influencing.treatment=<span class="kw">c</span>(<span class="st">&quot;prognosis&quot;</span>, <span class="st">&quot;clinic&quot;</span>, <span class="st">&quot;age&quot;</span>)</a></code></pre></div>
<p>in functions we will call later in this vignette. Further suppose that we don’t expect <code>prognosis</code> and <code>clinic</code> to be measured on the same scale in independent clinical settings where we would like to apply our estimated rule (so they are not sensible rule inputs). However, we do expect the gene expression measurements in <code>gene_1</code>, …, <code>gene_10</code> to potentially influence treatment response and also to be reliably measured in future settings (so they are sensible rule inputs). We specify this knowledge in <code>DevTreatRules</code> with the argument</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">names.influencing.rule=<span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;gene_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>))</a></code></pre></div>
</div>
<div id="on-the-development-dataset-build-the-treatment-rule" class="section level2">
<h2>On the Development Dataset, Build the Treatment Rule</h2>
<p>Although we could directly estimate a single treatment rule on the development dataset with <code>BuildRule()</code> using, for example,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">one.rule &lt;-<span class="st"> </span><span class="kw">BuildRule</span>(<span class="dt">development.data=</span>development.data,</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">                      <span class="dt">study.design=</span><span class="st">&quot;observational&quot;</span>,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">                      <span class="dt">prediction.approach=</span><span class="st">&quot;split.regression&quot;</span>,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">                      <span class="dt">name.outcome=</span><span class="st">&quot;no_relapse&quot;</span>,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">                      <span class="dt">type.outcome=</span><span class="st">&quot;binary&quot;</span>,</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">                      <span class="dt">desirable.outcome=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">                      <span class="dt">name.treatment=</span><span class="st">&quot;intervention&quot;</span>,</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">                      <span class="dt">names.influencing.treatment=</span><span class="kw">c</span>(<span class="st">&quot;prognosis&quot;</span>, <span class="st">&quot;clinic&quot;</span>, <span class="st">&quot;age&quot;</span>),</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">                      <span class="dt">names.influencing.rule=</span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;gene_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">                      <span class="dt">propensity.method=</span><span class="st">&quot;logistic.regression&quot;</span>,</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">                      <span class="dt">rule.method=</span><span class="st">&quot;glm.regression&quot;</span>)</a></code></pre></div>
<p>this has limited utility because it required us to specify just one value for the <code>prediction.approach</code> argument (even if we don’t have <em>a priori</em> knowledge about which of split-regression, OWL framework, and direct-interactions approaches will perform best) and to specify just one regression method for the <code>propensity.score</code> and <code>rule.method</code> arguments (even if we are not sure whether standard logistic regression or lasso/ridge logistic regression will yield a better rule).</p>
<p>Instead, it would be more useful to perform model selection to estimate rules for different combinations of split-regression/OWL framework/direct-interactions and standard/lasso/ridge logistic regression (e.g. by looping over calls to <code>BuildRule()</code>). The model-selection process is automated in <code>CompareRulesOnValidation()</code>.</p>
</div>
<div id="on-the-validation-dataset-perform-model-selection" class="section level2">
<h2>On the Validation Dataset, Perform Model Selection</h2>
<p>Here we will perform model selection by calling <code>CompareRulesOnValidation()</code> with the arguments</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">vec.approaches=<span class="kw">c</span>(<span class="st">&quot;OWL&quot;</span>, <span class="st">&quot;split.regression&quot;</span>, <span class="st">&quot;OWL.framework&quot;</span>, <span class="st">&quot;direct.interactions&quot;</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">vec.rule.methods=<span class="kw">c</span>(<span class="st">&quot;glm.regression&quot;</span>, <span class="st">&quot;lasso&quot;</span>, <span class="st">&quot;ridge&quot;</span>)</a></code></pre></div>
<p>which are actually the default values of <code>CompareRulesOnValidation()</code>, and with</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">vec.propensity.methods=<span class="st">&quot;logistic.regression&quot;</span></a></code></pre></div>
<p>Now we perform model selection by calling <code>CompareRulesOnValidation()</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">model.selection &lt;-<span class="st"> </span><span class="kw">CompareRulesOnValidation</span>(<span class="dt">development.data=</span>development.data,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">                <span class="dt">validation.data=</span>validation.data,</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">                <span class="dt">study.design.development=</span><span class="st">&quot;observational&quot;</span>,</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">                <span class="dt">vec.approaches=</span><span class="kw">c</span>(<span class="st">&quot;split.regression&quot;</span>, <span class="st">&quot;OWL.framework&quot;</span>, <span class="st">&quot;direct.interactions&quot;</span>),</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">                <span class="dt">vec.rule.methods=</span><span class="kw">c</span>(<span class="st">&quot;glm.regression&quot;</span>, <span class="st">&quot;lasso&quot;</span>, <span class="st">&quot;ridge&quot;</span>),</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">                <span class="dt">vec.propensity.methods=</span><span class="st">&quot;logistic.regression&quot;</span>,</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">                <span class="dt">name.outcome.development=</span><span class="st">&quot;no_relapse&quot;</span>,</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">                <span class="dt">type.outcome.development=</span><span class="st">&quot;binary&quot;</span>,</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">                <span class="dt">name.treatment.development=</span><span class="st">&quot;intervention&quot;</span>,</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">                <span class="dt">names.influencing.treatment.development=</span><span class="kw">c</span>(<span class="st">&quot;prognosis&quot;</span>, <span class="st">&quot;clinic&quot;</span>, <span class="st">&quot;age&quot;</span>),</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">                <span class="dt">names.influencing.rule.development=</span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;gene_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">                <span class="dt">desirable.outcome.development=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p>We can compare these estimates for the nine treatment rules (three approaches, three combinations of rule/propensity methods) to decide which rules to bring forward to the evaluation dataset. For context, the estimates for the naive “treat.all” and “treat.none” strategies are always provided by <code>CompareRulesOnValidation()</code>.</p>
<p>First, for rules estimated with the split-regression approach, we obtain the estimates </p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">model.selection<span class="op">$</span>list.summaries[[<span class="st">&quot;split.regression&quot;</span>]] </a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">##                                                    Positives Negatives</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">## propensity_logistic.regression_rule_glm.regression       665       585</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">## propensity_logistic.regression_rule_lasso                724       526</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">## propensity_logistic.regression_rule_ridge                795       455</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">## treat.all                                               1250         0</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">## treat.none                                                 0      1250</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">##                                                    ATE in Positives</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">## propensity_logistic.regression_rule_glm.regression          0.11919</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">## propensity_logistic.regression_rule_lasso                   0.09813</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">## propensity_logistic.regression_rule_ridge                   0.07610</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">## treat.all                                                  -0.00375</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">## treat.none                                                       NA</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">##                                                    ATE in Negatives      ABR</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">## propensity_logistic.regression_rule_glm.regression         -0.11361  0.11658</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">## propensity_logistic.regression_rule_lasso                  -0.12760  0.11054</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">## propensity_logistic.regression_rule_ridge                  -0.11966  0.09196</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">## treat.all                                                        NA -0.00375</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">## treat.none                                                 -0.00375  0.00375</span></a></code></pre></div>
<p> Next, for the OWL framework we have </p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">model.selection<span class="op">$</span>list.summaries[[<span class="st">&quot;OWL.framework&quot;</span>]] </a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">##                                                    Positives Negatives</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">## propensity_logistic.regression_rule_glm.regression       673       577</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">## propensity_logistic.regression_rule_lasso               1250         0</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">## propensity_logistic.regression_rule_ridge               1250         0</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">## treat.all                                               1250         0</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">## treat.none                                                 0      1250</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">##                                                    ATE in Positives</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">## propensity_logistic.regression_rule_glm.regression          0.12056</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">## propensity_logistic.regression_rule_lasso                  -0.00375</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">## propensity_logistic.regression_rule_ridge                  -0.00375</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">## treat.all                                                  -0.00375</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">## treat.none                                                       NA</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">##                                                    ATE in Negatives      ABR</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">## propensity_logistic.regression_rule_glm.regression         -0.12967  0.12477</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">## propensity_logistic.regression_rule_lasso                        NA -0.00375</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">## propensity_logistic.regression_rule_ridge                        NA -0.00375</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">## treat.all                                                        NA -0.00375</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co">## treat.none                                                 -0.00375  0.00375</span></a></code></pre></div>
<p> and, last, for the direct-interactions approach </p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">model.selection<span class="op">$</span>list.summaries[[<span class="st">&quot;direct.interactions&quot;</span>]] </a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">##                                                    Positives Negatives</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">## propensity_logistic.regression_rule_glm.regression       673       577</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">## propensity_logistic.regression_rule_lasso                678       572</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">## propensity_logistic.regression_rule_ridge               1250         0</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">## treat.all                                               1250         0</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">## treat.none                                                 0      1250</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">##                                                    ATE in Positives</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">## propensity_logistic.regression_rule_glm.regression          0.12457</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">## propensity_logistic.regression_rule_lasso                   0.10426</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">## propensity_logistic.regression_rule_ridge                  -0.00375</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">## treat.all                                                  -0.00375</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">## treat.none                                                       NA</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">##                                                    ATE in Negatives      ABR</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">## propensity_logistic.regression_rule_glm.regression         -0.12672  0.12556</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">## propensity_logistic.regression_rule_lasso                  -0.11338  0.10843</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">## propensity_logistic.regression_rule_ridge                        NA -0.00375</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">## treat.all                                                        NA -0.00375</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">## treat.none                                                 -0.00375  0.00375</span></a></code></pre></div>
<p> Based on the above estimates in the validation set, we decide to select three rules to bring forward to the evaluation set: (1) split-regression with logistic/logistic as the propensity/rule methods,</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">model.selection<span class="op">$</span>list.summaries<span class="op">$</span>split.regression[<span class="st">&quot;propensity_logistic.regression_rule_glm.regression&quot;</span>, ]</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">##        Positives        Negatives ATE in Positives ATE in Negatives </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">##          665.000          585.000            0.119           -0.114 </span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">##              ABR </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">##            0.117</span></a></code></pre></div>
<p>along with (2) OWL framework with logistic/logistic as the propensity/rule methods</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">model.selection<span class="op">$</span>list.summaries<span class="op">$</span>OWL.framework[<span class="st">&quot;propensity_logistic.regression_rule_glm.regression&quot;</span>, ]</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">##        Positives        Negatives ATE in Positives ATE in Negatives </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">##          673.000          577.000            0.121           -0.130 </span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">##              ABR </span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">##            0.125</span></a></code></pre></div>
<p>and (3) direct-interactions with logistic/lasso as the propensity/rule methods.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">model.selection<span class="op">$</span>list.summaries<span class="op">$</span>direct.interactions[<span class="st">&quot;propensity_logistic.regression_rule_lasso&quot;</span>, ]</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">##        Positives        Negatives ATE in Positives ATE in Negatives </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">##          678.000          572.000            0.104           -0.113 </span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">##              ABR </span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">##            0.108</span></a></code></pre></div>
<p>We can also see the underlying coefficient estimates for these rules with</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">rule.split &lt;-<span class="st"> </span>model.selection<span class="op">$</span>list.rules<span class="op">$</span>split.regression[[<span class="st">&quot;propensity_logistic.regression_rule_glm.regression&quot;</span>]]</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">coef</span>(rule.split<span class="op">$</span>rule.object.control)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">## (Intercept)         age      gene_1      gene_2      gene_3      gene_4 </span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">##     0.81702     0.00354    -0.53828    -0.09668     0.02675    -0.06418 </span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">##      gene_5      gene_6      gene_7      gene_8      gene_9     gene_10 </span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">##    -0.24930    -0.02657    -0.20052    -0.02206    -0.06508     0.35033</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="kw">coef</span>(rule.split<span class="op">$</span>rule.object.treat)</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">## (Intercept)         age      gene_1      gene_2      gene_3      gene_4 </span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">##    -0.26512    -0.00177     0.47034    -0.02004    -0.12251    -0.14514 </span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">##      gene_5      gene_6      gene_7      gene_8      gene_9     gene_10 </span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">##     0.14135    -0.04188    -0.03558     0.08977     0.11137     0.12449</span></a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">rule.OWL &lt;-<span class="st"> </span>model.selection<span class="op">$</span>list.rules<span class="op">$</span>OWL.framework[[<span class="st">&quot;propensity_logistic.regression_rule_glm.regression&quot;</span>]]</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">coef</span>(rule.OWL<span class="op">$</span>rule.object)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">## (Intercept)         age      gene_1      gene_2      gene_3      gene_4 </span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">##    -0.50119    -0.00340     0.46473     0.05083    -0.04349    -0.03906 </span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">##      gene_5      gene_6      gene_7      gene_8      gene_9     gene_10 </span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">##     0.15631     0.00839     0.09120     0.05875     0.08967    -0.10412</span></a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rule.DI &lt;-<span class="st"> </span>model.selection<span class="op">$</span>list.rules<span class="op">$</span>direct.interactions[[<span class="st">&quot;propensity_logistic.regression_rule_lasso&quot;</span>]]</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">coef</span>(rule.DI<span class="op">$</span>rule.object)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co">## 13 x 1 sparse Matrix of class &quot;dgCMatrix&quot;</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co">##                        1</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">## (Intercept)        .    </span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">## treatment.neg.pos -0.141</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">## age                .    </span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">## gene_1             0.189</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">## gene_2             .    </span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">## gene_3             .    </span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">## gene_4             .    </span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">## gene_5             .    </span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">## gene_6             .    </span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="co">## gene_7             .    </span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="co">## gene_8             .    </span></a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="co">## gene_9             .    </span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">## gene_10            .</span></a></code></pre></div>
</div>
<div id="on-the-evaluation-dataset-evaluate-the-selected-rules" class="section level2">
<h2>On the Evaluation Dataset, Evaluate the Selected Rules</h2>
<p>Since the validation dataset informed our model selection (i.e. we selected these particular two rules because they appeared best on the validation set), the estimates from the validation set itself are not trustworthy estimates of performance in independent settings. To obtain a trustworthy estimate of the rules’ performance in independent samples drawn from the same population, we turn to the <code>EvaluateRule()</code> function applied to the independent <strong>evaluation</strong> dataset.</p>
<p>First, we obtain the estimated performance of the rule using split-regression with</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">split.eval &lt;-<span class="st"> </span><span class="kw">EvaluateRule</span>(<span class="dt">evaluation.data=</span>evaluation.data,</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">                           <span class="dt">BuildRule.object=</span>rule.split,</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">                           <span class="dt">study.design=</span><span class="st">&quot;observational&quot;</span>,</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">                           <span class="dt">name.outcome=</span><span class="st">&quot;no_relapse&quot;</span>,</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">                           <span class="dt">type.outcome=</span><span class="st">&quot;binary&quot;</span>,</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">                           <span class="dt">desirable.outcome=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">                           <span class="dt">name.treatment=</span><span class="st">&quot;intervention&quot;</span>,</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">                           <span class="dt">names.influencing.treatment=</span><span class="kw">c</span>(<span class="st">&quot;prognosis&quot;</span>, <span class="st">&quot;clinic&quot;</span>, <span class="st">&quot;age&quot;</span>),</a>
<a class="sourceLine" id="cb19-10" data-line-number="10">                           <span class="dt">names.influencing.rule=</span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;gene_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb19-11" data-line-number="11">                           <span class="dt">propensity.method=</span><span class="st">&quot;logistic.regression&quot;</span>,</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">                           <span class="dt">bootstrap.CI=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">split.eval<span class="op">$</span>summaries</a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">##                n.positives ATE.positives n.negatives ATE.negatives     ABR</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">## estimated.rule         685        0.1529         565       -0.0540  0.1082</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">## treat.all             1250        0.0663           0            NA  0.0663</span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">## treat.none               0            NA        1250        0.0663 -0.0663</span></a></code></pre></div>
<p>And last, the rule from OWL framework yields the following estimates</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">OWL.eval &lt;-<span class="st"> </span><span class="kw">EvaluateRule</span>(<span class="dt">evaluation.data=</span>evaluation.data,</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">                              <span class="dt">BuildRule.object=</span>rule.OWL,</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">                              <span class="dt">study.design=</span><span class="st">&quot;observational&quot;</span>,</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">                              <span class="dt">name.outcome=</span><span class="st">&quot;no_relapse&quot;</span>,</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">                              <span class="dt">type.outcome=</span><span class="st">&quot;binary&quot;</span>,</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">                              <span class="dt">desirable.outcome=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">                              <span class="dt">name.treatment=</span><span class="st">&quot;intervention&quot;</span>,</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">                              <span class="dt">names.influencing.treatment=</span><span class="kw">c</span>(<span class="st">&quot;prognosis&quot;</span>, <span class="st">&quot;clinic&quot;</span>, <span class="st">&quot;age&quot;</span>),</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">                              <span class="dt">names.influencing.rule=</span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;gene_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">                              <span class="dt">propensity.method=</span><span class="st">&quot;logistic.regression&quot;</span>,</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">                              <span class="dt">bootstrap.CI=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">OWL.eval<span class="op">$</span>summaries</a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="co">##                n.positives ATE.positives n.negatives ATE.negatives     ABR</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">## estimated.rule         691        0.1511         559       -0.0518  0.1067</span></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co">## treat.all             1250        0.0663           0            NA  0.0663</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="co">## treat.none               0            NA        1250        0.0663 -0.0663</span></a></code></pre></div>
<p>And last, the rule from OWL framework yields the following estimates</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">DI.eval &lt;-<span class="st"> </span><span class="kw">EvaluateRule</span>(<span class="dt">evaluation.data=</span>evaluation.data,</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">                              <span class="dt">BuildRule.object=</span>rule.DI,</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">                              <span class="dt">study.design=</span><span class="st">&quot;observational&quot;</span>,</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">                              <span class="dt">name.outcome=</span><span class="st">&quot;no_relapse&quot;</span>,</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">                              <span class="dt">type.outcome=</span><span class="st">&quot;binary&quot;</span>,</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">                              <span class="dt">desirable.outcome=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb21-8" data-line-number="8">                              <span class="dt">name.treatment=</span><span class="st">&quot;intervention&quot;</span>,</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">                              <span class="dt">names.influencing.treatment=</span><span class="kw">c</span>(<span class="st">&quot;prognosis&quot;</span>, <span class="st">&quot;clinic&quot;</span>, <span class="st">&quot;age&quot;</span>),</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">                              <span class="dt">names.influencing.rule=</span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;gene_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb21-11" data-line-number="11">                              <span class="dt">propensity.method=</span><span class="st">&quot;logistic.regression&quot;</span>,</a>
<a class="sourceLine" id="cb21-12" data-line-number="12">                              <span class="dt">bootstrap.CI=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb21-13" data-line-number="13">DI.eval<span class="op">$</span>summaries</a>
<a class="sourceLine" id="cb21-14" data-line-number="14"><span class="co">##                n.positives ATE.positives n.negatives ATE.negatives     ABR</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co">## estimated.rule         685        0.1584         565       -0.0500  0.1094</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16"><span class="co">## treat.all             1250        0.0663           0            NA  0.0663</span></a>
<a class="sourceLine" id="cb21-17" data-line-number="17"><span class="co">## treat.none               0            NA        1250        0.0663 -0.0663</span></a></code></pre></div>
<p>We could have also obtained bootstrap-based CIs for the ATE/ABR estimates (in both the validation and evaluation datasets) by specifying the following arguments to <code>BuildRulesOnValidation</code> and <code>EvaluateRule()</code></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">bootstrap.CI=<span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">booststrap.CI.replications=<span class="dv">1000</span> <span class="co"># or any other number of replications</span></a></code></pre></div>
<p>but we chose not to compute CIs in this example to minimize run-time.</p>
<div id="references" class="section level3">
<h3>References</h3>
<ul>
<li>Yingqi Zhao, Donglin Zeng, A. John Rush &amp; Michael R. Kosorok (2012). Estimating individualized treatment rules using outcome weighted learning. Journal of the American Statistical Association, 107:499 1106–1118.</li>
<li>Lu Tian, Ash A. Alizadeh, Andrew J. Gentles, Robert Tibshirani (2014). A simple method for estimating interactions between a treatment and a large number of covariates. Journal of the American Statistical Association, 109:508: 1517–1532.</li>
<li>Shuai Chen, Lu Tian, Tianxi Cai, Menggang Yu (2017). A general statistical framework for subgroup identification and comparative treatment scoring. Biometrics, 73:4: 1199–1209.</li>
<li>Jeremy Roth and Noah Simon (2019). Using propensity scores to develop and evaluate treatment rules with observational data. (Manuscript in progress).</li>
<li>Jeremy Roth and Noah Simon (2019). Elucidating outcome-weighted-learning and its comparison to split-regression: direct vs. indirect methods in practice. (Manuscript in progress).</li>
</ul>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
